<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Document</title>
</head>
<body>
  
</body>
<script>
// 单例
// 简单的单例模式
let obj = {
  name: '张三',
  age: 20
}

// 单例模式： 1.一个类只有一个实例 2.有一个全局访问点 3.所有实例对象完全相同
// 挤登录：一个后台系统同时只有一个账号登录
// class Person{
//   static instance
//   constructor(name) {
//     if(Person.instance) {
//       return Person.instance
//     } else {
//       Person.instance = this
//       this.name = name
//       this.age = 20
//     }
//   }
// }
// let zhangsan = new Person('张三')
// let lisi = new Person('李四')
// console.log(zhangsan===lisi)

// 通用单例模式，高阶函数  2.单一原则
// class Person{
//   constructor(name) {
//     this.name = name
//   }
// }
// class Son{
//   constructor(name) {
//     this.name = name
//   }
// }
// 高阶函数：形参（输入）是函数或者返回值（输出）是函数
// 把非单例模式变成单例模式
function getSingle(Fn) {
  let instance
  return function(...args){
    if(!instance){
      instance = new Fn(...args)
    }
    return instance
  }
}
// let singlePerson = getSingle(Person)
// let zhangsan = singlePerson('张三')
// let lisi = singlePerson('李四')
// console.log(zhangsan,lisi)

// 对话框
class Dailog{
  constructor(html){
    this.html = html
    this.createDailog()
  }
  createDailog() {
    let div = document.createElement('div')
    div.innerHTML = this.html
    document.body.appendChild(div)
  }
}
let singleDailog = getSingle(Dailog)
let dailog1 = singleDailog('div1')
let dailog2 = singleDailog('div2')
// let dailog1 = new Dailog('div1')
// let dailog2 = new Dailog('div2')
console.log(dailog1,dailog2)
</script>
</html>