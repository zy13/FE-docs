<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
    <style>
        .box {
            width: 100px;
            height: 100px;
            position: absolute;
            left: 0;
            top: 0;
            background: red;
        }
    </style>
</head>
<body>
    <div class="box"></div>
</body>
<script>
    // 1、回调解决异步问题 ；缺点 回调地狱（可读性差，可维护性差）
    // function test(cb) {
    //     cb && cb();
    // }


    // test(function () {


    //     test(function () {

    //         test(function () {

    //             test(function () {
    //                 test(function () {

    //                 })
    //             })
    //         })
    //     })
    // })

    function move(ele,target,direction,cb) {
        let start = parseInt( getComputedStyle(ele,null)[direction]);
        let speed = 5*(target-start>0?1:-1);
        setTimeout(()=>{
            start += speed;
            ele.style[direction] = start + "px";
            if(Math.abs(target-start)<5){
                // console.log("运动完成");
                cb && cb();
            }else{
                move(ele,target,direction,cb)
            }
        },10)
    }
    let ele = document.querySelector(".box");
    // move(ele,300,"top");
    // move(ele,0,"left");
    // move(ele,300,"top");
    // 回调地狱
    move(ele,300,"left",function () {
        move(ele,300,"top",function () {
                // console.log("运动完成");
                move(ele,0,"left",function () {
                    move(ele,0,"top",function () {
                        console.log("所有运动完毕 ");
                    })
                })
        })
    });

    // 怎么解决回调地狱？？



</script>

</html>